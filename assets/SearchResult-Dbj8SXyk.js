import{u as I,g as te,h as le,i as U,j as se,P as ae,t as ue,k as re,l as q,m as H,n as ie,w as J,p as l,q as ne,R as _,v as oe,x as Ee,y as ce,C as he,z as de,A as ve,B as Ae,D as pe,E as me,F as ye,G as Be,H as O,I as T,J as ge,K as x,L as Fe}from"./app-CIm7EyhH.js";const ze=["/","/dingzuo/PLC.html","/dingzuo/danpianji.html","/dingzuo/danpianji2.html","/dingzuo/danpianji3.html","/dingzuo/dingzhichengxu.html","/dingzuo/jiqixuexi.html","/dingzuo/jixie.html","/dingzuo/shenduxuexi.html","/dingzuo/shutong.html","/dingzuo/unity.html","/dingzuo/%E6%88%91%E8%A6%81%E5%AE%9A%E5%88%B6Java%E7%A8%8B%E5%BA%8F.html","/dingzuo/%E6%88%91%E8%A6%81%E5%AE%9A%E5%88%B6NodeJS%E7%A8%8B%E5%BA%8F.html","/dingzuo/%E6%88%91%E8%A6%81%E5%AE%9A%E5%88%B6PHP%E7%A8%8B%E5%BA%8F.html","/dingzuo/%E6%88%91%E8%A6%81%E5%AE%9A%E5%88%B6Python%E7%A8%8B%E5%BA%8F.html","/dingzuo/%E6%88%91%E8%A6%81%E5%AE%9A%E5%88%B6%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%A8%8B%E5%BA%8F.html","/dingzuo/%E6%88%91%E8%A6%81%E5%AE%9A%E5%88%B6%E7%A7%BB%E5%8A%A8%E7%AB%AF%E7%A8%8B%E5%BA%8F.html","/zh/","/zh/slides.html","/other/liuxue.html","/person/chooseme.html","/person/contactme.html","/person/hehuoren.html","/%E6%88%90%E5%93%81%E7%A8%8B%E5%BA%8F/","/%E6%88%90%E5%93%81%E7%A8%8B%E5%BA%8F/SSM_Vue.html","/%E6%88%90%E5%93%81%E7%A8%8B%E5%BA%8F/SpringBoot_Vue.html","/%E6%88%90%E5%93%81%E7%A8%8B%E5%BA%8F/dingzhichengxu.html","/%E6%88%90%E5%93%81%E7%A8%8B%E5%BA%8F/nodejs_vue.html","/%E6%88%90%E5%93%81%E7%A8%8B%E5%BA%8F/python_django.html","/%E6%88%90%E5%93%81%E7%A8%8B%E5%BA%8F/%E5%B0%8F%E7%A8%8B%E5%BA%8F.html","/%E6%88%90%E5%93%81%E7%A8%8B%E5%BA%8F/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%85%B3%E9%94%AE%E8%AF%8D.html","/%E6%88%90%E5%93%81%E7%A8%8B%E5%BA%8F/%E7%AE%97%E6%B3%95%E7%B1%BB%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1-%E5%8D%8F%E5%90%8C%E8%BF%87%E6%BB%A4%E7%AD%89%E9%80%89%E9%A2%98.html","/%E6%A0%BC%E5%BC%8F%E5%8C%96%E6%96%87%E6%A1%A3/java.html","/%E6%A0%BC%E5%BC%8F%E5%8C%96%E6%96%87%E6%A1%A3/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%85%B3%E9%94%AE%E8%AF%8D.html","/%E9%80%89%E9%A2%98%E6%8E%A8%E8%8D%90/recommend2023.html","/%E9%80%89%E9%A2%98%E6%8E%A8%E8%8D%90/recommend2024.html","/%E9%80%89%E9%A2%98%E6%8E%A8%E8%8D%90/recommend2025.html","/zh/guide/","/zh/guide/bar/","/zh/guide/bar/baz.html","/zh/guide/foo/","/zh/guide/foo/ray.html","/404.html","/dingzuo/","/other/","/person/","/%E6%A0%BC%E5%BC%8F%E5%8C%96%E6%96%87%E6%A1%A3/","/%E9%80%89%E9%A2%98%E6%8E%A8%E8%8D%90/"],fe="SEARCH_PRO_QUERY_HISTORY",m=I(fe,[]),He=()=>{const{queryHistoryCount:s}=x,a=s>0;return{enabled:a,queryHistory:m,addQueryHistory:u=>{a&&(m.value=Array.from(new Set([u,...m.value.slice(0,s-1)])))},removeQueryHistory:u=>{m.value=[...m.value.slice(0,u),...m.value.slice(u+1)]}}},j=s=>ze[s.id]+("anchor"in s?`#${s.anchor}`:""),xe="SEARCH_PRO_RESULT_HISTORY",{resultHistoryCount:$}=x,y=I(xe,[]),Ce=()=>{const s=$>0;return{enabled:s,resultHistory:y,addResultHistory:a=>{if(s){const u={link:j(a),display:a.display};"header"in a&&(u.header=a.header),y.value=[u,...y.value.slice(0,$-1)]}},removeResultHistory:a=>{y.value=[...y.value.slice(0,a),...y.value.slice(a+1)]}}},Re=s=>{const a=he(),u=U(),C=de(),i=q(0),F=H(()=>i.value>0),v=ve([]);return Ae(()=>{const{search:A,terminate:R}=pe(),B=ge(E=>{const g=E.join(" "),{searchFilter:k=d=>d,splitWord:D,suggestionsFilter:L,...p}=a.value;g?(i.value+=1,A(E.join(" "),u.value,p).then(d=>k(d,g,u.value,C.value)).then(d=>{i.value-=1,v.value=d}).catch(d=>{console.warn(d),i.value-=1,i.value||(v.value=[])})):v.value=[]},x.searchDelay-x.suggestDelay);J([s,u],([E])=>B(E),{immediate:!0}),me(()=>{R()})}),{isSearching:F,results:v}};var De=te({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(s,{emit:a}){const u=le(),C=U(),i=se(ae),{enabled:F,addQueryHistory:v,queryHistory:A,removeQueryHistory:R}=He(),{enabled:B,resultHistory:E,addResultHistory:g,removeResultHistory:k}=Ce(),D=F||B,L=ue(s,"queries"),{results:p,isSearching:d}=Re(L),r=re({isQuery:!0,index:0}),c=q(0),h=q(0),b=H(()=>D&&(A.value.length>0||E.value.length>0)),w=H(()=>p.value.length>0),Q=H(()=>p.value[c.value]||null),M=()=>{const{isQuery:e,index:t}=r;t===0?(r.isQuery=!e,r.index=e?E.value.length-1:A.value.length-1):r.index=t-1},V=()=>{const{isQuery:e,index:t}=r;t===(e?A.value.length-1:E.value.length-1)?(r.isQuery=!e,r.index=0):r.index=t+1},Y=()=>{c.value=c.value>0?c.value-1:p.value.length-1,h.value=Q.value.contents.length-1},G=()=>{c.value=c.value<p.value.length-1?c.value+1:0,h.value=0},K=()=>{h.value<Q.value.contents.length-1?h.value+=1:G()},N=()=>{h.value>0?h.value-=1:Y()},S=e=>e.map(t=>Fe(t)?t:l(t[0],t[1])),W=e=>{if(e.type==="customField"){const t=ye[e.index]||"$content",[n,f=""]=Be(t)?t[C.value].split("$content"):t.split("$content");return e.display.map(o=>l("div",S([n,...o,f])))}return e.display.map(t=>l("div",S(t)))},z=()=>{c.value=0,h.value=0,a("updateQuery",""),a("close")},X=()=>F?l("ul",{class:"search-pro-result-list"},l("li",{class:"search-pro-result-list-item"},[l("div",{class:"search-pro-result-title"},i.value.queryHistory),A.value.map((e,t)=>l("div",{class:["search-pro-result-item",{active:r.isQuery&&r.index===t}],onClick:()=>{a("updateQuery",e)}},[l(O,{class:"search-pro-result-type"}),l("div",{class:"search-pro-result-content"},e),l("button",{class:"search-pro-remove-icon",innerHTML:T,onClick:n=>{n.preventDefault(),n.stopPropagation(),R(t)}})]))])):null,Z=()=>B?l("ul",{class:"search-pro-result-list"},l("li",{class:"search-pro-result-list-item"},[l("div",{class:"search-pro-result-title"},i.value.resultHistory),E.value.map((e,t)=>l(_,{to:e.link,class:["search-pro-result-item",{active:!r.isQuery&&r.index===t}],onClick:()=>{z()}},()=>[l(O,{class:"search-pro-result-type"}),l("div",{class:"search-pro-result-content"},[e.header?l("div",{class:"content-header"},e.header):null,l("div",e.display.map(n=>S(n)).flat())]),l("button",{class:"search-pro-remove-icon",innerHTML:T,onClick:n=>{n.preventDefault(),n.stopPropagation(),k(t)}})]))])):null;return ie("keydown",e=>{if(s.isFocusing){if(w.value){if(e.key==="ArrowUp")N();else if(e.key==="ArrowDown")K();else if(e.key==="Enter"){const t=Q.value.contents[h.value];v(s.queries.join(" ")),g(t),u.push(j(t)),z()}}else if(B){if(e.key==="ArrowUp")M();else if(e.key==="ArrowDown")V();else if(e.key==="Enter"){const{index:t}=r;r.isQuery?(a("updateQuery",A.value[t]),e.preventDefault()):(u.push(E.value[t].link),z())}}}}),J([c,h],()=>{var e;(e=document.querySelector(".search-pro-result-list-item.active .search-pro-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>l("div",{class:["search-pro-result-wrapper",{empty:s.queries.length?!w.value:!b.value}],id:"search-pro-results"},s.queries.length?d.value?l(ne,{hint:i.value.searching}):w.value?l("ul",{class:"search-pro-result-list"},p.value.map(({title:e,contents:t},n)=>{const f=c.value===n;return l("li",{class:["search-pro-result-list-item",{active:f}]},[l("div",{class:"search-pro-result-title"},e||i.value.defaultTitle),t.map((o,ee)=>{const P=f&&h.value===ee;return l(_,{to:j(o),class:["search-pro-result-item",{active:P,"aria-selected":P}],onClick:()=>{v(s.queries.join(" ")),g(o),z()}},()=>[o.type==="text"?null:l(o.type==="title"?oe:o.type==="heading"?Ee:ce,{class:"search-pro-result-type"}),l("div",{class:"search-pro-result-content"},[o.type==="text"&&o.header?l("div",{class:"content-header"},o.header):null,l("div",W(o))])])})])})):i.value.emptyResult:D?b.value?[X(),Z()]:i.value.emptyHistory:i.value.emptyResult)}});export{De as default};
